{% extends "base.html" %}
{% load static %}
{% block content %}


    <div class="container">
         <div class="row">
            <div class="col-md-5">
              <form method="POST" enctype="multipart/form-data">
                <a class="btn btn-outline-secondary m-3 btn-sm"  href="{% url 'create_work' %}">Create new Work</a>
                {% csrf_token %}
                  {{ form }}
                  <button type="submit"><i class="fas fa-search fa-xs"></i></button>
                  <a href="{% url 'clear_work' %}"><i class="fas fa-backspace fa-xs"></i></a>
              </form>
            </div>
            <div class="col-md-6">
                {% include "./pages.html" %}
            </div>
        </div>
    </div>
    <table>
    <thead>
        <tr>
            <th></th>
            <th></th>
            <th></th>
            {% for col in cols %}
                {% if "file" not in col %}
                <th nowrap><a  class="mb-1" href="{% url 'sort_work' col%}"><i class="fas fa-sort-up"></i></a>
                    {{ col }}
                <a  class="mb-1" href="{% url 'reverse_sort_work' col %}"><i class="fas fa-sort-down"></i></a></th>
                {% else %}
                    <th></th>
                {% endif %}
            {% endfor %}
            <th></th>
            <th></th>
            <th></th>
        </tr>
    </thead>

      {% for work in works %}
          <tr height="35px">
            {% include "./edit_buttons.html" %}
            <td>{{ work.id }}</td>
            <td>{{ work.item_id }}</td>
            <td nowrap>{{ work.get_source_display }}</td>
            <td><div class="truncate">{{ work.notes|default_if_none:'' }}</div></td>
              <td><div class="truncate">{{ work.location|default_if_none:''  }}</div></td>
              <td>{{ work.value|default_if_none:'' }}</td>
              <td>{{ work.inventory_date | date:"Y-m-d" }}</td>
              <td><div class="truncate">{{ work.title|default_if_none:'' }}</div></td>
              <td><div class="truncate">{{ work.series|default_if_none:'' }}</div></td>
              <td>{{ work.date_year }}</td>
              <td><div class="truncate">{{ work.medium|default_if_none:'' }}</div></td>
              <td><div class="truncate">{{ work.signature_and_writing|default_if_none:'' }}</div></td>
              <td><div class="truncate">{{ work.condition|default_if_none:'' }}</div></td>
              <td nowrap>{{ work.get_category_display }}</td>
              <td>{{ work.height|default_if_none:""  }}</td>
              <td>{{ work.width|default_if_none:""  }}</td>
              <td>{{ work.depth|default_if_none:""  }}</td>
              <td><div class="truncate">{{ work.size_note|default_if_none:'' }}</div></td>
              {% if work.file1 %}
              <td>
                  <button type="button" class="btn bg-transparent" data-toggle="modal" data-target="#imageModal" data-image_id="{% static 'thumbs/'%}{{work.file1}}">
                      <img height="30px" src="{% static 'thumbs/'%}{{work.file1}}"/>
                  </button>
              </td>
              {% else %}
                 <td></td>
              {% endif %}
              {% if work.file2 %}
              <td>
                  <button type="button" class="btn bg-transparent" data-toggle="modal" data-target="#imageModal" data-image_id="{% static 'thumbs/'%}{{work.file2}}">
                  <img height="30px" src="{% static 'thumbs/'%}{{work.file2}}"/>
                  </button>
              </td>
              {% else %}
                 <td></td>
              {% endif %}
              {% if work.file3 %}
              <td>
                  <button type="button" class="btn bg-transparent" data-toggle="modal" data-target="#imageModal" data-image_id="{% static 'thumbs/'%}{{work.file3}}">
                  <img height="30px" src="{% static 'thumbs/'%}{{work.file3}}"/>
                  </button>
              </td>
              {% else %}
                 <td></td>
              {% endif %}
              {% if work.file4 %}
              <td>
                  <button type="button" class="btn bg-transparent" data-toggle="modal" data-target="#imageModal" data-image_id="{% static 'thumbs/'%}{{work.file4}}">
                  <img height="30px" src="{% static 'thumbs/'%}{{work.file4}}"/>
                  </button>
              </td>
              {% else %}
                 <td></td>
              {% endif %}
              {% if work.file5 %}
              <td>
                  <button type="button" class="btn bg-transparent" data-toggle="modal" data-target="#imageModal" data-image_id="{% static 'thumbs/'%}{{work.file5}}">
                  <img height="30px" src="{% static 'thumbs/'%}{{work.file5}}"/>
                  </button>
              </td>
              {% else %}
                 <td></td>
              {% endif %}
              {% include "./edit_buttons.html" %}
          </tr>
      {% endfor %}
    </table>

{% include "./pages.html" %}

{% endblock content %}